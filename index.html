<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title> Postulaciones The Blaze  | Postulaciones</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:radial-gradient(circle at top,#111,#000);
    color:#e4e6eb;
}
.container{max-width:1200px;margin:auto;padding:40px 20px}
h1{text-align:center;margin-bottom:40px}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px}

.card{
    background:linear-gradient(180deg,#0f1115,#0a0b0e);
    border-radius:16px;
    padding:25px;
    box-shadow:0 0 40px rgba(0,0,0,.8);
    display:flex;
    flex-direction:column;
    justify-content:space-between
}
.icon{
    width:50px;height:50px;
    background:#7c6a00;
    border-radius:12px;
    display:flex;align-items:center;justify-content:center;
    margin-bottom:20px
}
.card h2{margin:0 0 10px}
.card p{color:#9da1a9;font-size:14px}

.alert{
    margin:20px 0;
    padding:12px;
    border-radius:10px;
    background:rgba(240,71,71,.15);
    color:#f04747;
    display:flex;
    gap:8px;
    font-size:14px
}

button{
    padding:12px;
    border-radius:10px;
    border:none;
    font-weight:bold;
    cursor:pointer;
    font-size:15px
}
.btn-open{background:linear-gradient(135deg,#43b581,#2ea043);color:white}
.btn-closed{background:#2b2d31;color:#72767d;cursor:not-allowed}
.admin{margin-top:10px;background:#5865f2;color:white}

/* MODAL */
.modal{
    position:fixed;inset:0;
    background:rgba(0,0,0,.8);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:10
}
.modal-content{
    background:#1c1f26;
    padding:30px;
    border-radius:16px;
    max-width:500px;
    width:90%
}
.modal h3{margin-top:0}
label{display:block;margin-top:15px;font-size:14px}
input{
    width:100%;
    padding:10px;
    margin-top:5px;
    border-radius:8px;
    border:none;
    background:#2b2d31;
    color:white
}
.modal button{margin-top:20px;width:100%;background:#5865f2;color:white}

/* Bot칩n Discord */
#btn-discord-login {
  background: #5865F2;
  color: white;
  font-weight: bold;
  border-radius: 10px;
  padding: 14px;
  border: none;
  cursor: pointer;
  width: 100%;
  max-width: 320px;
  margin: 0 auto 40px auto;
  display: block;
  font-size: 18px;
  transition: background-color 0.3s ease;
}
#btn-discord-login:hover {
  background: #4752c4;
}
</style>
</head>

<body>

<div class="container">

<h1>Postulaciones The Blaze Java</h1>

<!-- Bot칩n para iniciar sesi칩n con Discord -->
<button id="btn-discord-login" onclick="loginDiscord()">Iniciar sesi칩n con Discord</button>

<div class="cards">

<!-- AYUDANTE -->
<div class="card">
<div>
<div class="icon">游늯</div>
<h2>Rango AYUDANTE</h2>
<p>Postulaci칩n para formar parte del staff como Ayudante.</p>
<div class="alert" id="alert-ayudante"></div>
</div>
<button id="btn-ayudante"></button>
<button class="admin" onclick="adminToggle('ayudante')">Admin: Abrir / Cerrar</button>
</div>

<!-- CREADOR -->
<div class="card">
<div>
<div class="icon">游늯</div>
<h2>CREADOR DE CONTENIDO</h2>
<p>Postulaci칩n para creadores oficiales del servidor.</p>
<div class="alert" id="alert-creador"></div>
</div>
<button id="btn-creador"></button>
<button class="admin" onclick="adminToggle('creador')">Admin: Abrir / Cerrar</button>
</div>

<!-- SOPORTE -->
<div class="card">
<div>
<div class="icon">游늯</div>
<h2>Rango SOPORTE</h2>
<p>Postulaci칩n para el equipo de soporte.</p>
<div class="alert" id="alert-soporte"></div>
</div>
<button id="btn-soporte"></button>
<button class="admin" onclick="adminToggle('soporte')">Admin: Abrir / Cerrar</button>
</div>

</div>
</div>

<!-- MODAL -->
<div class="modal" id="modal">
<div class="modal-content">
<h3 id="modalTitle"></h3>
<div id="questions"></div>
<button onclick="cerrar()">Continuar</button>
</div>
</div>

<script>
const preguntas = {
ayudante:[
"쮺u치ntos a침os tienes?",
"쯊ienes experiencia como staff?",
"쮺u치ntas horas puedes dedicar?"
],
creador:[
"쮼n qu칠 plataforma creas contenido?",
"쮺u치ntos seguidores tienes?",
"쯈u칠 tipo de contenido haces?"
],
soporte:[
"쯊ienes conocimientos t칠cnicos?",
"쮿as trabajado en soporte antes?",
"쯉abes trabajar bajo presi칩n?"
]
};

const adminPassword = "valetroyeroc";
const userPassword = "valetroyeroc";

function estado(r){ return localStorage.getItem(r) === "abierto"; }

function actualizar(r){
  const btn = document.getElementById("btn-"+r);
  const alert = document.getElementById("alert-"+r);

  if(estado(r)){
    alert.innerHTML = "游릭 Postulaci칩n ABIERTA";
    alert.style.background = "rgba(67,181,129,.15)";
    alert.style.color = "#43b581";
    btn.textContent = "Postularse";
    btn.className = "btn-open";
    btn.onclick = () => abrir(r);
  }else{
    alert.innerHTML = "游 Postulaci칩n CERRADA";
    alert.style.background = "rgba(240,71,71,.15)";
    alert.style.color = "#f04747";
    btn.textContent = "Cerrada";
    btn.className = "btn-closed";
    btn.onclick = null;
  }
}

function adminToggle(r){
  const pass = prompt("Introduce la contrase침a de administrador para cambiar el estado de: " + r.toUpperCase());
  if(pass === adminPassword){
    localStorage.setItem(r, estado(r) ? "cerrado" : "abierto");
    actualizar(r);
    alert("Estado cambiado correctamente.");
  } else {
    alert("Contrase침a incorrecta. No tienes permiso.");
  }
}

function abrir(r){
  document.getElementById("modal").style.display = "flex";
  document.getElementById("modalTitle").textContent = "Preguntas previas - " + r.toUpperCase();
  const q = document.getElementById("questions");
  q.innerHTML = "";
  preguntas[r].forEach(p=>{
    q.innerHTML += `<label>${p}</label><input>`;
  });
}

function cerrar() {
  const inputPass = prompt("Para enviar tu postulaci칩n, ingresa la contrase침a:");
  if(inputPass !== userPassword){
    alert("Contrase침a incorrecta. No se envi칩 la postulaci칩n.");
    return;
  }

  const modalTitle = document.getElementById("modalTitle").textContent.toLowerCase().replace("preguntas previas - ", "");
  const inputs = document.querySelectorAll("#questions input");
  const respuestas = [];

  inputs.forEach(input => respuestas.push(input.value.trim()));

  let actuales = JSON.parse(localStorage.getItem("postulaciones_" + modalTitle)) || [];
  actuales.push(respuestas);
  localStorage.setItem("postulaciones_" + modalTitle, JSON.stringify(actuales));

  document.getElementById("modal").style.display = "none";
  alert("Postulaci칩n enviada con 칠xito.");

  mostrarVerPostulaciones();
}

function mostrarVerPostulaciones() {
  if(document.getElementById("btn-ver-postulaciones")) return;

  const pass = prompt("Ingresa la contrase침a para acceder a ver postulaciones:");
  if(pass !== userPassword) return;

  const btn = document.createElement("button");
  btn.id = "btn-ver-postulaciones";
  btn.textContent = "Ver postulaciones enviadas";
  btn.style.margin = "20px auto";
  btn.style.display = "block";
  btn.style.background = "#5865f2";
  btn.style.color = "white";
  btn.style.borderRadius = "10px";
  btn.style.padding = "12px";
  btn.onclick = mostrarPostulaciones;
  document.querySelector(".container").insertBefore(btn, document.querySelector(".cards"));
}

function mostrarPostulaciones() {
  let todasPostulaciones = "";
  ["ayudante", "creador", "soporte"].forEach(rango => {
    const data = JSON.parse(localStorage.getItem("postulaciones_" + rango)) || [];
    if(data.length > 0) {
      todasPostulaciones += `<h3>Postulaciones para ${rango.toUpperCase()}</h3>`;
      data.forEach((respuestas, i) => {
        todasPostulaciones += `<b>Postulaci칩n #${i+1}</b><br>`;
        preguntas[rango].forEach((preg, idx) => {
          todasPostulaciones += `<i>${preg}:</i> ${respuestas[idx] || "No respondido"}<br>`;
        });
        todasPostulaciones += "<hr>";
      });
    }
  });

  if(!todasPostulaciones) {
    todasPostulaciones = "<p>No hay postulaciones guardadas.</p>";
  }

  document.getElementById("modalTitle").textContent = "Postulaciones enviadas";
  document.getElementById("questions").innerHTML = todasPostulaciones;
  document.getElementById("modal").style.display = "flex";
}

function loginDiscord() {
  const client_id = "1457099365205283028"; // tu ID de aplicaci칩n
  const redirect_uri = encodeURIComponent("https://tuusuario.github.io/TheBlazeJava/callback"); // cambia tu GitHub Pages
  const scope = encodeURIComponent("identify email");
  const response_type = "code";

  const url = `https://discord.com/api/oauth2/authorize?client_id=${client_id}&redirect_uri=${redirect_uri}&response_type=${response_type}&scope=${scope}`;
  window.location.href = url;
}

["ayudante","creador","soporte"].forEach(r=>{
  if(!localStorage.getItem(r)) localStorage.setItem(r,"cerrado");
  actualizar(r);
});
</script>

</body>
</html>
